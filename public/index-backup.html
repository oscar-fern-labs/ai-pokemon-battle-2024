<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>LLM Pokemon Battle - The AI Showdown</title>
    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
</head>
<body>
    <div id="game-container">
        <div id="title-screen" class="screen active">
            <h1>üéÆ LLM POKEMON BATTLE üéÆ</h1>
            <div class="subtitle">The AI Showdown!</div>
            <div class="title-sparkles">‚ú®‚≠ê‚ú®</div>
            <button class="game-button primary" id="start-btn">START BATTLE</button>
            <div class="fighter-preview">
                <div>ü§ñ Claude ‚Ä¢ üí¨ ChatGPT ‚Ä¢ üíé Gemini ‚Ä¢ üòè Grok</div>
                <div>ü¶ô Llama ‚Ä¢ üß† Kimi ‚Ä¢ üå™Ô∏è Mistral ‚Ä¢ üèÆ Qwen</div>
            </div>
        </div>

        <div id="selection-screen" class="screen">
            <h2>Choose Your Fighter!</h2>
            <div id="character-list"></div>
            <button class="game-button" id="back-btn">BACK</button>
        </div>

        <div id="battle-screen" class="screen">
            <div class="battle-area">
                <div class="enemy-info">
                    <div id="enemy-name">Enemy</div>
                    <div class="health-bar"><div id="enemy-health" class="health-fill"></div></div>
                    <div id="enemy-sprite">üíª</div>
                </div>
                <div class="player-info">
                    <div id="player-sprite">ü§ñ</div>
                    <div id="player-name">Player</div>
                    <div class="health-bar"><div id="player-health" class="health-fill"></div></div>
                </div>
            </div>
            <div class="battle-controls">
                <div id="battle-text">What will you do?</div>
                <button class="battle-button" id="attack-btn">ATTACK</button>
                <button class="battle-button" id="run-btn">RUN</button>
            </div>
            <div id="move-menu" class="hidden">
                <div id="move-list"></div>
                <button id="move-back-btn">BACK</button>
            </div>
        </div>

        <div id="victory-screen" class="screen">
            <h2 id="result-title">Victory!</h2>
            <div id="result-message">You won!</div>
            <button class="game-button" id="play-again-btn">PLAY AGAIN</button>
            <button class="game-button" id="main-menu-btn">MAIN MENU</button>
        </div>
    </div>

    <script src="js/llm-data.js"></script>
    <script>
        let selectedLLM = null;
        let enemyLLM = null;
        let playerHP = 100;
        let enemyHP = 100;

        function showScreen(name) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById(name + '-screen').classList.add('active');
        }

        function loadCharacters() {
            const list = document.getElementById('character-list');
            list.innerHTML = '';
            
            Object.keys(LLM_DATA).forEach(key => {
                const llm = LLM_DATA[key];
                const div = document.createElement('div');
                div.className = 'character-card';
                div.innerHTML = \`
                    <div class="char-sprite">\${llm.sprite}</div>
                    <div class="char-name">\${llm.displayName}</div>
                    <div class="char-stats">HP: \${llm.stats.hp} | ATK: \${llm.stats.attack}</div>
                \`;
                div.addEventListener('click', () => selectCharacter(key));
                list.appendChild(div);
            });
        }

        function selectCharacter(key) {
            selectedLLM = key;
            document.querySelectorAll('.character-card').forEach(c => c.classList.remove('selected'));
            event.target.closest('.character-card').classList.add('selected');
            
            setTimeout(() => startBattle(), 500);
        }

        function startBattle() {
            const enemies = Object.keys(LLM_DATA).filter(k => k !== selectedLLM);
            enemyLLM = enemies[Math.floor(Math.random() * enemies.length)];
            
            const player = LLM_DATA[selectedLLM];
            const enemy = LLM_DATA[enemyLLM];
            
            document.getElementById('player-name').textContent = player.displayName;
            document.getElementById('player-sprite').textContent = player.sprite;
            document.getElementById('enemy-name').textContent = enemy.displayName;
            document.getElementById('enemy-sprite').textContent = enemy.sprite;
            
            playerHP = player.stats.hp;
            enemyHP = enemy.stats.hp;
            updateHealth();
            loadMoves();
            
            showScreen('battle');
            document.getElementById('battle-text').textContent = \`What will \${player.displayName} do?\`;
        }

        function updateHealth() {
            const playerPct = (playerHP / LLM_DATA[selectedLLM].stats.hp) * 100;
            const enemyPct = (enemyHP / LLM_DATA[enemyLLM].stats.hp) * 100;
            
            document.getElementById('player-health').style.width = playerPct + '%';
            document.getElementById('enemy-health').style.width = enemyPct + '%';
        }

        function loadMoves() {
            const list = document.getElementById('move-list');
            list.innerHTML = '';
            
            LLM_DATA[selectedLLM].moves.forEach((move, i) => {
                const btn = document.createElement('button');
                btn.className = 'move-button';
                btn.textContent = \`\${move.name} (\${move.power} power)\`;
                btn.addEventListener('click', () => useMove(i));
                list.appendChild(btn);
            });
        }

        function useMove(index) {
            document.getElementById('move-menu').classList.add('hidden');
            const move = LLM_DATA[selectedLLM].moves[index];
            const damage = Math.floor(move.power * 0.8 + Math.random() * move.power * 0.4);
            
            enemyHP = Math.max(0, enemyHP - damage);
            document.getElementById('battle-text').textContent = 
                \`\${LLM_DATA[selectedLLM].displayName} used \${move.name}! \${damage} damage!\`;
            
            updateHealth();
            
            if (enemyHP <= 0) {
                setTimeout(() => endBattle(true), 1000);
                return;
            }
            
            setTimeout(() => {
                const enemyMove = LLM_DATA[enemyLLM].moves[Math.floor(Math.random() * 4)];
                const counterDmg = Math.floor(enemyMove.power * 0.7 + Math.random() * enemyMove.power * 0.3);
                playerHP = Math.max(0, playerHP - counterDmg);
                
                document.getElementById('battle-text').textContent = 
                    \`\${LLM_DATA[enemyLLM].displayName} used \${enemyMove.name}! \${counterDmg} damage!\`;
                
                updateHealth();
                
                if (playerHP <= 0) {
                    setTimeout(() => endBattle(false), 1000);
                } else {
                    setTimeout(() => {
                        document.getElementById('battle-text').textContent = 
                            \`What will \${LLM_DATA[selectedLLM].displayName} do?\`;
                    }, 2000);
                }
            }, 1500);
        }

        function endBattle(won) {
            if (won) {
                document.getElementById('result-title').textContent = 'Victory!';
                document.getElementById('result-message').textContent = 
                    \`\${LLM_DATA[selectedLLM].displayName} wins!\`;
            } else {
                document.getElementById('result-title').textContent = 'Defeat!';
                document.getElementById('result-message').textContent = 
                    \`\${LLM_DATA[enemyLLM].displayName} wins!\`;
            }
            showScreen('victory');
        }

        // Event listeners
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('start-btn').addEventListener('click', () => {
                showScreen('selection');
                loadCharacters();
            });
            
            document.getElementById('back-btn').addEventListener('click', () => {
                showScreen('title');
            });
            
            document.getElementById('attack-btn').addEventListener('click', () => {
                document.getElementById('move-menu').classList.remove('hidden');
            });
            
            document.getElementById('move-back-btn').addEventListener('click', () => {
                document.getElementById('move-menu').classList.add('hidden');
            });
            
            document.getElementById('run-btn').addEventListener('click', () => {
                showScreen('title');
            });
            
            document.getElementById('play-again-btn').addEventListener('click', () => {
                showScreen('selection');
                loadCharacters();
            });
            
            document.getElementById('main-menu-btn').addEventListener('click', () => {
                showScreen('title');
            });
            
            console.log('‚úÖ LLM Pokemon Battle ready!');
        });
    </script>
</body>
</html>
